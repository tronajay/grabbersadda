{% extends 'base.html' %}
{% block title %}
{% if category %}
 {{category.title}} - {{site.title}}
{% elif store %}
{{store.title}} - {{site.title}}
{% elif search %}
Search Results: {{search}} - {{site.title}}
 {% else %}
 {{site.title}}
{% endif %}
{% endblock title %}
{% block mdescription %}
   {% if category %}
	  {{category.description}}
	{% else %}
	{{site.description}}
   {% endif %}
{% endblock mdescription %}


{% block ogtitle %}{{site.title}} -Coopn {{site.tagline}}{% endblock ogtitle %}
{% block ogdescription %}{{site.description}}{% endblock ogdescription %} 
{% block ogurl %}{{site.url}}{% endblock ogurl %}
{% block ogimage %}{{site.url}}/media/{{site.featureimg}}{% endblock ogimage %}  
{% block ogimagealt %}{{site.title}} - {{site.tagline}} {% endblock ogimagealt %} 
{% block pagetitle %} 
  {% if category %}
  Category: {{category.title}}
  {% elif store %}
  Store: {{store.title}}
  {% elif search %}
  Search: {{search}}
{% endif %}  

{% endblock pagetitle %}

{% block content %}
{% load custom_tags %}
{% load humanize %}

<!--Feature Deals Starts Here-->
{% if fdeals %}
<div class="carousel mb-8 carousel-custom slide" data-bs-ride="carousel" data-bs-interval="3000">
<!--begin::Carousel-->
<div class="carousel-inner">
	{% for f in fdeals %}
	<!--begin::Item-->
	<div class="carousel-item {% if forloop.first %}active{% endif %} ">
		<center>
			<a href="/shop/{{f.title.slug}}">
				<img class="rounded w-100" src="/media/{{f.image}}" alt="">
			</a>
		</center>
	</div>
	<!--end::Item-->
	{% endfor %}
</div>
<!--end::Carousel-->
</div>
{% endif %}
<!--Feature Deals Ends Here-->

   <div class="row g-10">
			{% for p in products %}
			  <!--begin::Col-->
			<div class="col-md-4 col-sm-4 col-lg-3">
				<!--begin::Hot sales post-->
				<div class="card p-5 ribbon ribbon-top">
					<!--begin::Overlay-->
					
					<div class="ribbon-label bg-primary"> {% discountp p.original_price p.sale_price %}% Off </div>
					
					<a class="" href="/shop/{{p.slug}}">
						<!--begin::Image-->
						<center><img src="/media/{{p.thumbnail}}" class="h-200px align-items-center" alt=""></center>
						<!--end::Image-->
						
					</a>
					<!--end::Overlay-->
					<!--begin::Body-->
					<div class="mt-5">
						<!--begin::Title-->
						<a href="/shop/{{p.slug}}" class="fs-5 text-dark fw-bolder text-hover-primary text-dark lh-base">{{p.title | truncatechars:50}}</a>
						<!--end::Title-->
						<!--begin::Text-->
						<div class="fw-bold fs-5 text-gray-600 text-dark mt-3"></div>
						<!--end::Text-->
						<!--begin::Text-->
						<div class="fs-4 fw-bolder mt-5 d-flex flex-stack">
							<!--begin::Label-->
							<span class="badge border-dashed fs-4 fw-bolder text-dark p-2">
							{% if p.sale_price == 0 %}
							FREE
							{% else %}
							<span class="fs-6 fw-bold text-gray-400">â‚¹</span>{{p.sale_price}}
							{% endif %}
							</span>
							
							<!--end::Label-->
							<!--begin::Action-->
							<a href="/shop/{{p.slug}}" class="btn-sm text-white btn-primary">Buy Now</a>
							<!--end::Action-->
						</div>
						<div class="float-start mt-2">
						  <i><i class="far fa-clock mx-1"></i>{{p.date | naturaltime}}</i>
						</div>
						<!--end::Text-->
					</div>
					<!--end::Body-->
				</div>
				<!--end::Hot sales post-->
			</div>
			<!--end::Col-->
			
			{% endfor %}
		</div>
		<ul class="pagination my-10">
		{% if products.number != 1 and products.previous_page_number is not 1%}
	<li class="page-item next"><a class="page-link" href="/">First</span></a></li>
	{% endif %}
		{% if products.has_previous %}
		    <li class="page-item previous"><a href="?page={{products.previous_page_number}}" class="page-link">Previous</a></span></li>
		{% endif %}

    <li class="page-item disabled"><span class="page-link">Page {{products.number}} of {{products.paginator.num_pages}}</span></li>
    {% if products.has_next %}
	 <li class="page-item next"><a class="page-link" href="?page={{products.next_page_number}}">Next</span></a></li>
	{% endif %}
	{% if products.number != products.paginator.num_pages and products.next_page_number != products.paginator.num_pages %}
	<li class="page-item next"><a class="page-link" href="?page={{products.paginator.num_pages}}">Last</span></a></li>
	{% endif %}
</ul>
{% endblock content %}
  
